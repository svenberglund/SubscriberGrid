{"version":3,"sources":["../webpack/bootstrap 169eae77750ed612afd9","worker/simulation.worker.jsx","common/utils.jsx"],"names":["MockPublisher","constructor","publishing","channels","channelState","Map","channelDirection","message","startPublishing","channelStateSeries","forEach","channel_","inputState","randomInt","set","JSON","stringify","delay","timerId","setTimeout","request","offset","oldState","get","oldDirection","newState","series","parse","shift","push","seriesString","channel","msg","rgb","integerToHeatMap","percent","Math","round","postMessage","delayDeterminator","SingletonPubliser","instance","createInstance","object","getInstance","mockPublisher","alfanums","randomString","length","chars","result","i","floor","random","min","max","ceil","zeroToThousand","minVal","maxVal","midVal","intH","intL"],"mappings":"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","file":"169eae77750ed612afd9.worker.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/react-mst-grid-layout/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 169eae77750ed612afd9","import { randomInt, integerToHeatMap } from \"../common/utils\";\n\n\n/*\n    Generating and publishing 'mock data' simulating data to a dashboard.\n    Publishes data in a unified format independently on several different channels.\n    {\n        rgb: \"{rgbL : int [0,255], rgbH : int [0,255]}\"\n        percent : int [0,100],\n        series : [int [0,1000] ... int [0,1000]] (10 values in a series) \n    }\n    The data is 'continuous' in the sense that there is not a to big differnce between two consecutive\n    data points published on any channel. \n    Moreover the data points will be continuously descending for a while and then switching direction to ascending, and so on... if that makes sense...\n*/\nclass MockPublisher {\n\n    constructor() {\n        this.publishing = false;\n        this.channels = null;\n        this.channelState = new Map(); // All the published values are derived from a curent state int [0,1000] of the channel\n        this.channelDirection = new Map();\n        this.message=new Map();\n    }\n\n    startPublishing(channels) {\n\n        this.publishing = true;\n        this.channels = channels;\n        let channelState = new Map();\n        let channelStateSeries = new Map();\n        let channelDirection = new Map();\n        let message = new Map();\n\n        channels.forEach(function (channel_) {\n            let inputState = randomInt(0, 1000);\n            channelState.set(channel_, inputState);\n            channelStateSeries.set(channel_, JSON.stringify([0,0,0,0,0,0,0,0,0,inputState])); // same as the channelState but will be a series with history\n            channelDirection.set(channel_, inputState > 500 ? false : true);\n        });\n\n        let delay = 150;\n        let timerId = setTimeout(function request() {\n\n            channels.forEach(function (channel_) {\n                let offset = randomInt(10, 25);\n                let oldState = channelState.get(channel_);\n                let oldDirection = channelDirection.get(channel_);\n\n                let newState = oldDirection ? oldState + offset : oldState - offset;\n\n                // pushing back the new state if its outside boundaries\n                if (newState < 0) {\n                    newState = offset;\n                } else if (newState > 1000) {\n                    newState = 1000 - offset;\n                };\n\n                // now set the series also - channelState as well as the series need to be saved to the next iteration\n                channelState.set(channel_, newState);let series = JSON.parse(channelStateSeries.get(channel_));\n                series.shift();\n                series.push(newState);\n                let seriesString = JSON.stringify(series);\n                channelStateSeries.set(channel_, seriesString);\n\n                // preparing the message mapped to channel index to send to 'frontend' (UI thread)\n                message={channel: channel_ , msg:{\n                    // int : newState, \n                    rgb :  JSON.stringify(integerToHeatMap(newState)), \n                    percent : Math.round(newState/10),\n                    series : seriesString\n                }};\n            \n                postMessage(message); // posting message from worker to frontend\n\n                // change direction?\n                if (randomInt(0, 15) === 1) {\n                    channelDirection.set(channel_, !channelDirection.get(channel_));\n                }\n                // change the delay to produce some irregularity?\n                let delayDeterminator = randomInt(0, 5);\n                if (delayDeterminator === 1) {\n                    delay = 300;\n                } else {\n                    delay = 150;\n                }\n\n            });\n\n            timerId = setTimeout(request, delay);\n        }, delay)\n    }\n}\n\n/* Will return a instance of our singleton MockPublisher class */\nvar SingletonPubliser = (function () {\n    var instance;\n    function createInstance() {\n        var object = new MockPublisher();\n        return object;\n    }\n    return {\n        getInstance: function () {\n            if (!instance) {\n                instance = createInstance();\n            }\n            return instance;\n        }\n    };\n})();\n\nlet mockPublisher = SingletonPubliser.getInstance();\nmockPublisher.startPublishing([0, 1, 2, 3]);  // We publish to 4 channels\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/worker/simulation.worker.jsx","/*\n    Utility functions for use in demo.\n*/\n\n\n\nvar alfanums = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\n\n/*\n    Delivers a pseudo random string with given lenght and optionally composed from the characters given by chars parameter.\n*/\nexport function randomString(length, chars = alfanums) {\n    var result = '';\n    for (var i = length; i > 0; --i) result += chars[Math.floor(Math.random() * chars.length)];\n    return result;\n}\n\n/*\n    A pseudo random integer in the range between min and max (closed interval).\n*/\nexport function randomInt(min, max){\n    return Math.ceil( min - 0.5 + (Math.random() * max));\n}\n\n/*\n    Maps a integer in the closed range zero to thousand to two different integers as output.\n    These two different integers are in the range zero to 255 and the mapping is continuous.\n    The output is intended to be used in a heat map style rgb output (e.g. for red and blue).\n*/\nexport function integerToHeatMap(zeroToThousand){\n\n    let minVal = 0;\n    let maxVal = 1000;\n    let midVal = 500;\n    let intH = null;\n    let intL = null;\n\n    if (zeroToThousand >= midVal){\n        intH = 255;\n        intL = Math.round(255 * ((maxVal - zeroToThousand) / (maxVal - midVal)));\n   }\n   else{\n       intL = 255;\n       intH = Math.round(255 * ((zeroToThousand - minVal) / (midVal - minVal)));\n   }\n   \n    /* \n    rgbL is a value that is active in low ranges ot the underlying variable.\n    rgbH is active in higher ranges. \n    e.g. to construct a blue-to-red heat map from this output do something like this `rgb(${ouput.get(rgbH)},0,${output.get(rgbL)})`\n    */\n    return {'rgbL' : intL, 'rgbH' : intH};\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/utils.jsx"],"sourceRoot":""}